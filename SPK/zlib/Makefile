SRC =  	adler32.c compress.c crc32.c deflate.c infback.c inffast.c inflate.c inftrees.c gzio.c trees.c uncompr.c zutil.c

OBJ = $(SRC:.c=.o)

# dependency makefiles, generated by gcc in target $(OBJ)
DEP = $(SRC:.c=.d)

OUT = ../libz.a

# C++ compiler flags (-g -O2 -Wall)
CCFLAGS = -g

# compiler
CCC = gcc

$(OUT): $(OBJ)
	ar rcs $(OUT) $(OBJ)

$(OBJ): $(SRC)
	$(CCC) $(CCFLAGS) -MMD -MP -c $< -o $@

# use proper target even if a file named 'clean' is present
.PHONY: clean

clean:
	rm -f $(OBJ) $(DEP) $(OUT)

# update dependencies if necessary, before doing anything else
-include $(DEP)

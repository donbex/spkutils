SRC = 7Decoder.cpp LzmaDecode.cpp

OBJ = $(SRC:.cpp=.o)

# dependency makefiles, generated by gcc in target $(OBJ)
DEP = $(SRC:.cpp=.d)

OUT = ../lib7.a

# C++ compiler flags (-g -O2 -Wall)
CXXFLAGS = -g

# compiler
CXX = g++

$(OUT): $(OBJ)
	ar rcs $(OUT) $(OBJ)

$(OBJ): $(SRC)
	$(CXX) $(CXXFLAGS) -MMD -MP -c $< -o $@

# use proper target even if a file named 'clean' is present
.PHONY: clean

clean:
	rm -f $(OBJ) $(DEP) $(OUT)

# update dependencies if necessary, before doing anything else
-include $(DEP)
